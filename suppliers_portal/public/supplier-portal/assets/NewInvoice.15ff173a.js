var A=Object.defineProperty,M=Object.defineProperties;var L=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var k=(i,n,d)=>n in i?A(i,n,{enumerable:!0,configurable:!0,writable:!0,value:d}):i[n]=d,I=(i,n)=>{for(var d in n||(n={}))P.call(n,d)&&k(i,d,n[d]);if(T)for(var d of T(n))j.call(n,d)&&k(i,d,n[d]);return i},U=(i,n)=>M(i,L(n));import{_ as F,y as D,r as f,a as g,M as H,e as v,m as e,f as h,w as Q,K as r,L as p,u as o,H as w,N as $,O as G,P as E,F as V,z as x,Q as J,J as K,p as Z,G as W,q as X,A as Y,B as ee,g as se,o as u,t as S,v as te}from"./vendor.3e69a9be.js";import{a as oe,b as le,c as ae,r as ie}from"./index.a459834f.js";const ce=(i,n)=>{const d=new Date(i);return d.setDate(d.getDate()+n),d},ne=i=>{switch(i){case"NET 10":return 10;case"NET 15":return 15;case"NET 30":return 30;case"NET 45":return 45;case"NET 60":return 60;default:return 0}};const a=i=>(Y("data-v-0c596e92"),i=i(),ee(),i),de={class:"container mt-5 py-3 border"},re={class:"row mb-3"},_e=a(()=>e("div",{class:"col-6"},[e("h1",{class:"text-gray-900 font-bold text-[32px]"},"New Invoice")],-1)),pe={class:"col-6"},ue={class:"d-flex"},me={class:"ms-auto"},ve={class:"btn-group",role:"group","aria-label":"Basic example"},be={type:"button",class:"btn btn-primary btn-light"},he=te("Cancel"),ye={class:"container border-bottom pb-3"},fe={class:"mb-2 row"},ge={class:"col"},we={class:"row"},Ve=a(()=>e("label",{for:"bill_no",class:"col-sm-3 col-form-label"},"Invoice Number",-1)),xe={class:"col-sm-8"},Se={class:"col"},Ne={class:"row"},Te=a(()=>e("label",{for:"service_date",class:"col-sm-3 col-form-label"},"Service Date",-1)),ke={class:"col-sm-8"},Ie={class:"mb-2 row"},Ue={class:"col"},De={class:"row"},Ee=a(()=>e("label",{for:"supplier_id",class:"col-sm-3 col-form-label"},"Supplier ID",-1)),ze={class:"col-sm-8"},Ce={class:"col"},Oe={class:"row"},Re=a(()=>e("label",{for:"posting_date",class:"col-sm-3 col-form-label"},"Invoice Date",-1)),Be={class:"col-sm-8"},qe={class:"mb-2 row"},Ae={class:"col"},Me={class:"row"},Le=a(()=>e("label",{for:"supplier_name",class:"col-sm-3 col-form-label"},"Supplier Name",-1)),Pe={class:"col-sm-8"},je=["value"],Fe={class:"col"},He={class:"row"},Qe=a(()=>e("label",{for:"payment_terms_template",class:"col-sm-3 col-form-label"},"Invoice Terms",-1)),$e={class:"col-sm-8"},Ge=a(()=>e("option",{readonly:""},null,-1)),Je=["value"],Ke={class:"mb-2 row"},Ze=a(()=>e("div",{class:"col"},null,-1)),We={class:"col"},Xe={class:"row"},Ye=a(()=>e("label",{for:"posting_date",class:"col-sm-3 col-form-label"},"Due Date",-1)),es={class:"col-sm-8"},ss={class:"mb-2 row"},ts={class:"col"},os={class:"accordion accordion-flush",id:"service-address-accordion"},ls={class:"accordion-item"},as=a(()=>e("h2",{class:"accordion-header ps-0"},[e("button",{class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne"}," Service Address ")],-1)),is={id:"collapseOne",class:"accordion-collapse collapse show","data-bs-parent":"#service-address-accordion"},cs={class:"accordion-body"},ns={class:"row mb-1"},ds=a(()=>e("label",{for:"site_code",class:"col-sm-3 col-form-label"},"Site Code",-1)),rs={class:"col-sm-8"},_s={class:"row mb-1"},ps=a(()=>e("label",{for:"street",class:"col-sm-3 col-form-label"},"Street",-1)),us={class:"col-sm-8"},ms={class:"row mb-1"},vs=a(()=>e("label",{for:"city",class:"col-sm-3 col-form-label"},"City",-1)),bs={class:"col-sm-8"},hs={class:"row mb-1"},ys=a(()=>e("label",{for:"state",class:"col-sm-3 col-form-label"},"State",-1)),fs={class:"col-sm-8"},gs={class:"row mb-1"},ws=a(()=>e("label",{for:"zip_code",class:"col-sm-3 col-form-label"},"Zip Code",-1)),Vs={class:"col-sm-8"},xs={class:"col"},Ss={class:"accordion accordion-flush",id:"address-accordion"},Ns={class:"accordion-item"},Ts=a(()=>e("h2",{class:"accordion-header ps-0"},[e("button",{class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapse-2","aria-expanded":"true","aria-controls":"collapse-2"}," Notes ")],-1)),ks={id:"collapse-2",class:"accordion-collapse collapse show","data-bs-parent":"#address-accordion"},Is={class:"accordion-body"},Us={class:"row mb-1"},Ds=a(()=>e("label",{for:"remarks",class:"col-sm-3 col-form-label"},"Notes",-1)),Es={class:"col-md-8"},zs={class:"container"},Cs=a(()=>e("h4",null,"Line Items",-1)),Os={key:0,class:"table"},Rs=a(()=>e("thead",null,[e("tr",null,[e("th",{scope:"col"},"#"),e("th",{scope:"col",width:"30%"},"Service Type"),e("th",{scope:"col"},"Quantity"),e("th",{scope:"col"},"Rate"),e("th",{scope:"col"},"Amount")])],-1)),Bs={class:"table-group-divider"},qs={scope:"row"},As={class:"col-mb-12"},Ms=["onUpdate:modelValue"],Ls=a(()=>e("option",{readonly:""},null,-1)),Ps=["value"],js=["onUpdate:modelValue"],Fs={class:"input-group"},Hs=a(()=>e("span",{class:"input-group-text"},[e("i",{class:"bi bi-currency-dollar"})],-1)),Qs=["onUpdate:modelValue"],$s={class:"input-group"},Gs=a(()=>e("span",{class:"input-group-text"},[e("i",{class:"bi bi-currency-dollar"})],-1)),Js=["onUpdate:modelValue"],Ks={type:"button",class:"btn btn-dark btn-sm"},Zs=["onClick"],Ws={class:"d-flex"},Xs=a(()=>e("i",{class:"bi bi-plus"},null,-1)),Ys=[Xs],et={class:"container"},st={class:"mb-2 row"},tt=a(()=>e("div",{class:"col"},null,-1)),ot={class:"col"},lt={class:"input-group"},at=a(()=>e("label",{for:"grand_total",class:"col-sm-3 col-form-label"},"Total Amount",-1)),it={class:"cols-sm-5"},ct={class:"input-group"},nt=a(()=>e("span",{class:"input-group-text currency-fmt"},[e("i",{class:"bi bi-currency-dollar"})],-1)),dt={setup(i){const n=oe()==="Administrator",d=D({doctype:"Purchase Invoice",insert:{onSuccess(){ie.push({name:"SupplierInvoiceList"})}}}),N=D({doctype:"Supplier",fields:["name as value","supplier_name as label"],orderBy:"creation desc"});N.fetch();const z=[{label:"NET 10",value:"NET 10"},{label:"NET 15",value:"NET 15"},{label:"NET 30",value:"NET 30"},{label:"NET 45",value:"NET 45"},{label:"NET 60",value:"NET 60"},{label:"Due on Receipt",value:"Due on Receipt"}],C=[{label:"Repair",value:"Repair"},{label:"Preventive Maintenance",value:"Preventive Maintenance"}],s=f({bill_no:"",supplier:le(),service_date:new Date().toISOString().split("T")[0],posting_date:new Date().toISOString().split("T")[0],supplier_name:ae(),payment_terms_template:"",grand_total:0,site_code:"",street:"",city:"",state:"",zip_code:"",remarks:""}),m=f([]);let b=g(()=>s.payment_terms_template?ce(s.posting_date,ne(s.payment_terms_template)).toISOString().split("T")[0]:"");const O=()=>{const c=f({item_code:"",qty:0,rate:0,amount:0});c.amount=g(()=>c.qty*c.rate),m.push(c)},R=c=>{m.splice(c,1)};s.grand_total=g(()=>m.reduce((c,l)=>c+l.amount,0));const B=()=>{d.insert.submit(U(I({},s),{set_posting_time:!0,due_date:b.value,site_code:s.site_code,street:s.street,city:s.city,state:s.state,zip_code:s.zip_code,remarks:s.remarks,items:m.map(c=>({item_code:c.item_code,qty:c.qty,rate:c.rate}))}))};return H(()=>s.supplier_name,c=>{c&&(s.supplier=c.value)}),(c,l)=>{const q=se("router-link");return u(),v("form",{onSubmit:l[14]||(l[14]=X(()=>{},["prevent"]))},[e("div",de,[e("div",re,[_e,e("div",pe,[e("div",ue,[e("div",me,[e("div",ve,[e("button",be,[h(q,{to:"/"},{default:Q(()=>[he]),_:1})]),e("button",{type:"button",class:"btn btn-primary btn-dark",onClick:B},"Save")])])])])]),e("div",ye,[e("div",fe,[e("div",ge,[e("div",we,[Ve,e("div",xe,[r(e("input",{type:"text",class:"form-control",id:"bill_no","onUpdate:modelValue":l[0]||(l[0]=t=>o(s).bill_no=t)},null,512),[[p,o(s).bill_no,void 0,{number:!0}]])])])]),e("div",Se,[e("div",Ne,[Te,e("div",ke,[h(w,{type:"date",size:"lg",variant:"outline",placeholder:"Service Date",id:"service_date",disabled:!1,modelValue:o(s).service_date,"onUpdate:modelValue":l[1]||(l[1]=t=>o(s).service_date=t)},null,8,["modelValue"])])])])]),e("div",Ie,[e("div",Ue,[e("div",De,[Ee,e("div",ze,[r(e("input",{type:"text",readonly:"",class:"form-control-plaintext",id:"supplier_id","onUpdate:modelValue":l[2]||(l[2]=t=>o(s).supplier=t)},null,512),[[p,o(s).supplier]])])])]),e("div",Ce,[e("div",Oe,[Re,e("div",Be,[h(w,{type:"date",size:"lg",variant:"outline",placeholder:"Invoice Date",id:"posting_date",disabled:!1,modelValue:o(s).posting_date,"onUpdate:modelValue":l[3]||(l[3]=t=>o(s).posting_date=t)},null,8,["modelValue"])])])])]),e("div",qe,[e("div",Ae,[e("div",Me,[Le,e("div",Pe,[n?(u(),$(G,{key:1,id:"supplier_name",options:o(N).data,placeholder:"Supplier Name",hideSearch:!o(s).bill_no,label:"company_name",modelValue:o(s).supplier_name,"onUpdate:modelValue":l[4]||(l[4]=t=>o(s).supplier_name=t)},null,8,["options","hideSearch","modelValue"])):(u(),v("input",{key:0,type:"text",readonly:"",class:"form-control-plaintext",id:"supplier_name",value:o(s).supplier_name},null,8,je))])])]),e("div",Fe,[e("div",He,[Qe,e("div",$e,[r(e("select",{class:"form-select form-select-mb h-100 d-inline-block","aria-label":"Invoice Terms","onUpdate:modelValue":l[5]||(l[5]=t=>o(s).payment_terms_template=t)},[Ge,(u(),v(V,null,x(z,t=>e("option",{value:t.value},S(t.label),9,Je)),64))],512),[[E,o(s).payment_terms_template]])])])])]),e("div",Ke,[Ze,e("div",We,[e("div",Xe,[Ye,e("div",es,[h(w,{type:"date",size:"lg",variant:"outline",placeholder:"Due Date",id:"due_date",disabled:!0,modelValue:o(b),"onUpdate:modelValue":l[6]||(l[6]=t=>J(b)?b.value=t:b=t)},null,8,["modelValue"])])])])]),e("div",ss,[e("div",ts,[e("div",os,[e("div",ls,[as,e("div",is,[e("div",cs,[e("div",ns,[ds,e("div",rs,[r(e("input",{type:"text",class:"form-control",id:"site_code","onUpdate:modelValue":l[7]||(l[7]=t=>o(s).site_code=t)},null,512),[[p,o(s).site_code]])])]),e("div",_s,[ps,e("div",us,[r(e("input",{type:"text",class:"form-control",id:"street","onUpdate:modelValue":l[8]||(l[8]=t=>o(s).street=t)},null,512),[[p,o(s).street]])])]),e("div",ms,[vs,e("div",bs,[r(e("input",{type:"text",class:"form-control",id:"city","onUpdate:modelValue":l[9]||(l[9]=t=>o(s).city=t)},null,512),[[p,o(s).city]])])]),e("div",hs,[ys,e("div",fs,[r(e("input",{type:"text",class:"form-control",id:"state","onUpdate:modelValue":l[10]||(l[10]=t=>o(s).state=t)},null,512),[[p,o(s).state]])])]),e("div",gs,[ws,e("div",Vs,[r(e("input",{type:"text",class:"form-control",id:"zip_code","onUpdate:modelValue":l[11]||(l[11]=t=>o(s).zip_code=t)},null,512),[[p,o(s).zip_code]])])])])])])])]),e("div",xs,[e("div",Ss,[e("div",Ns,[Ts,e("div",ks,[e("div",Is,[e("div",Us,[Ds,e("div",Es,[h(K,{variant:"subtle",size:"md",placeholder:"Enter Notes Here",disabled:!1,modelValue:o(s).remarks,"onUpdate:modelValue":l[12]||(l[12]=t=>o(s).remarks=t),id:"remarks"},null,8,["modelValue"])])])])])])])])])]),e("div",zs,[Cs,o(m).length!==0?(u(),v("table",Os,[Rs,e("tbody",Bs,[(u(!0),v(V,null,x(o(m),(t,y)=>(u(),v("tr",{key:y},[e("th",qs,S(y+1),1),e("td",null,[e("div",As,[r(e("select",{class:"form-select form-select-mb h-100 d-inline-block","aria-label":"Service Types","onUpdate:modelValue":_=>t.item_code=_},[Ls,(u(),v(V,null,x(C,_=>e("option",{value:_.value},S(_.label),9,Ps)),64))],8,Ms),[[E,t.item_code]])])]),e("td",null,[r(e("input",{type:"text",class:"form-control","onUpdate:modelValue":_=>t.qty=_},null,8,js),[[p,t.qty]])]),e("td",null,[e("div",Fs,[Hs,r(e("input",{type:"text",class:"form-control","onUpdate:modelValue":_=>t.rate=_},null,8,Qs),[[p,t.rate,void 0,{number:!0}]])])]),e("td",null,[e("div",$s,[Gs,r(e("input",{type:"text",readonly:"",class:"form-control","onUpdate:modelValue":_=>t.amount=_},null,8,Js),[[p,t.amount,void 0,{number:!0}]])])]),e("td",null,[e("button",Ks,[e("i",{onClick:_=>R(y),class:"bi bi-trash"},null,8,Zs)])])]))),128))])])):Z("",!0),e("div",Ws,[e("div",{class:W(o(m).length===0?"ms-auto pt-3":"ms-auto")},[e("div",{class:"btn-group",role:"group","aria-label":"Basic example"},[e("button",{type:"button",class:"btn btn-dark btn-sm",onClick:O},Ys)])],2)])]),e("div",et,[e("div",st,[tt,e("div",ot,[e("div",lt,[at,e("div",it,[e("div",ct,[nt,r(e("input",{type:"text",readonly:"",class:"form-control","onUpdate:modelValue":l[13]||(l[13]=t=>o(s).grand_total=t)},null,512),[[p,o(s).grand_total,void 0,{number:!0}]])])])])])])])])],32)}}};var ut=F(dt,[["__scopeId","data-v-0c596e92"]]);export{ut as default};
