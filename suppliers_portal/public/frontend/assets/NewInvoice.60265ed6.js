import{_ as B,y as I,r as g,a as S,M as q,e as _,m as e,f as m,w as A,K as i,L as d,u as o,H as h,N as P,O as M,P as U,F as x,z as N,Q as L,t as y,p as T,J as j,G as F,q as H,A as Q,B as $,g as G,o as r,v as J}from"./vendor.3e69a9be.js";import{a as K,b as f,c as Z,r as W}from"./index.92ba4d98.js";const X=(u,w)=>{const v=new Date(u);return v.setDate(v.getDate()+w),v},Y=u=>{switch(u){case"NET 10":return 10;case"NET 15":return 15;case"NET 30":return 30;case"NET 45":return 45;case"NET 60":return 60;default:return 0}};const a=u=>(Q("data-v-7312333a"),u=u(),$(),u),ee={class:"container mt-5 py-3 border"},se={class:"row mb-3"},te=a(()=>e("div",{class:"col-6"},[e("h1",{class:"text-gray-900 font-bold text-[32px]"},"New Invoice")],-1)),oe={class:"col-6"},le={class:"d-flex"},ae={class:"ms-auto"},ne={class:"btn-group",role:"group","aria-label":"Basic example"},ie={type:"button",class:"btn btn-primary btn-light"},ce=J("Cancel"),de={class:"container border-bottom pb-3"},re={class:"mb-2 row"},_e={class:"col"},ue={class:"row"},pe=a(()=>e("label",{for:"supplier_invoice_number",class:"col-sm-3 col-form-label"},"Invoice Number",-1)),me={class:"col-sm-8"},ve={class:"col"},be={class:"row"},he=a(()=>e("label",{for:"service_date",class:"col-sm-3 col-form-label"},"Service Date",-1)),ye={class:"col-sm-8"},fe={class:"mb-2 row"},we={class:"col"},Ve={class:"row"},ge=a(()=>e("label",{for:"supplier_id",class:"col-sm-3 col-form-label"},"Supplier ID",-1)),Se={class:"col-sm-8"},xe={class:"col"},Ne={class:"row"},Te=a(()=>e("label",{for:"invoice_date",class:"col-sm-3 col-form-label"},"Invoice Date",-1)),De={class:"col-sm-8"},Ie={class:"mb-2 row"},Ue={class:"col"},ke={class:"row"},Ee=a(()=>e("label",{for:"supplier_name",class:"col-sm-3 col-form-label"},"Supplier Name",-1)),ze={class:"col-sm-8"},Ce=["value"],Oe={class:"col"},Re={class:"row"},Be=a(()=>e("label",{for:"invoice_terms",class:"col-sm-3 col-form-label"},"Invoice Terms",-1)),qe={class:"col-sm-8"},Ae=a(()=>e("option",{readonly:""},null,-1)),Pe=["value"],Me={class:"mb-2 row"},Le=a(()=>e("div",{class:"col"},null,-1)),je={class:"col"},Fe={class:"row"},He=a(()=>e("label",{for:"invoice_date",class:"col-sm-3 col-form-label"},"Due Date",-1)),Qe={class:"col-sm-8"},$e={class:"mb-2 row"},Ge={class:"col"},Je={class:"accordion accordion-flush",id:"service-address-accordion"},Ke={class:"accordion-item"},Ze=a(()=>e("h2",{class:"accordion-header ps-0"},[e("button",{class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne"}," Service Address ")],-1)),We={id:"collapseOne",class:"accordion-collapse collapse show","data-bs-parent":"#service-address-accordion"},Xe={class:"accordion-body"},Ye={class:"row mb-1"},es=a(()=>e("label",{for:"street",class:"col-sm-3 col-form-label"},"Street",-1)),ss={class:"col-sm-8"},ts={class:"row mb-1"},os=a(()=>e("label",{for:"city",class:"col-sm-3 col-form-label"},"City",-1)),ls={class:"col-sm-8"},as={class:"row mb-1"},ns=a(()=>e("label",{for:"state",class:"col-sm-3 col-form-label"},"State",-1)),is={class:"col-sm-8"},cs={class:"row mb-1"},ds=a(()=>e("label",{for:"zip_code",class:"col-sm-3 col-form-label"},"Zip Code",-1)),rs={class:"col-sm-8"},_s={class:"col"},us={class:"accordion accordion-flush",id:"address-accordion"},ps={class:"accordion-item"},ms={class:"accordion-header ps-0"},vs={class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapse-2","aria-expanded":"true","aria-controls":"collapse-2"},bs={id:"collapse-2",class:"accordion-collapse collapse show","data-bs-parent":"#address-accordion"},hs={class:"accordion-body"},ys={key:0,class:"row mb-1"},fs=a(()=>e("label",{for:"payment_reference_no",class:"col-sm-3 col-form-label"},"Payment Reference",-1)),ws={class:"col-sm-5"},Vs={key:1,class:"row mb-1"},gs=a(()=>e("label",{for:"payment_reference_date",class:"col-sm-3 col-form-label"},"Payment Date",-1)),Ss={class:"col-sm-5"},xs={class:"row mb-1"},Ns=a(()=>e("label",{for:"notes",class:"col-sm-3 col-form-label"},"Notes",-1)),Ts={class:"col-md-8"},Ds={class:"container"},Is=a(()=>e("h4",null,"Line Items",-1)),Us={key:0,class:"table"},ks=a(()=>e("thead",null,[e("tr",null,[e("th",{scope:"col"},"#"),e("th",{scope:"col",width:"30%"},"Service Type"),e("th",{scope:"col"},"Quantity"),e("th",{scope:"col"},"Rate"),e("th",{scope:"col"},"Amount")])],-1)),Es={class:"table-group-divider"},zs={scope:"row"},Cs={class:"col-mb-12"},Os=["onUpdate:modelValue"],Rs=a(()=>e("option",{readonly:""},null,-1)),Bs=["value"],qs=["onUpdate:modelValue"],As={class:"input-group"},Ps=a(()=>e("span",{class:"input-group-text"},[e("i",{class:"bi bi-currency-dollar"})],-1)),Ms=["onUpdate:modelValue"],Ls={class:"input-group"},js=a(()=>e("span",{class:"input-group-text"},[e("i",{class:"bi bi-currency-dollar"})],-1)),Fs=["onUpdate:modelValue"],Hs={type:"button",class:"btn btn-dark btn-sm"},Qs=["onClick"],$s={class:"d-flex"},Gs=a(()=>e("i",{class:"bi bi-plus"},null,-1)),Js=[Gs],Ks={class:"container"},Zs={class:"mb-2 row"},Ws=a(()=>e("div",{class:"col"},null,-1)),Xs={class:"col"},Ys={class:"input-group"},et=a(()=>e("label",{for:"total_amount",class:"col-sm-3 col-form-label"},"Total Amount",-1)),st={class:"cols-sm-5"},tt={class:"input-group"},ot=a(()=>e("span",{class:"input-group-text currency-fmt"},[e("i",{class:"bi bi-currency-dollar"})],-1)),lt={setup(u){const w=K()==="Administrator",v=I({doctype:"Invoices",insert:{onSuccess(){W.push({name:"SupplierInvoiceList"})}}}),k=[{label:"NET 10",value:"NET 10"},{label:"NET 15",value:"NET 15"},{label:"NET 30",value:"NET 30"},{label:"NET 45",value:"NET 45"},{label:"NET 60",value:"NET 60"},{label:"Due on Receipt",value:"Due on Receipt"}],E=[{label:"Repair",value:"Repair"},{label:"Preventive Maintenance",value:"Preventive Maintenance"}],s=g({supplier_invoice_number:"",supplier:f(),service_date:new Date().toISOString().split("T")[0],invoice_date:new Date().toISOString().split("T")[0],supplier_name:Z(),invoice_terms:"",total_amount:0,street:"",city:"",state:"",zip_code:"",payment_reference_no:"",payment_reference_date:new Date().toISOString().split("T")[0],notes:""}),p=g([]);let b=S(()=>s.invoice_terms?X(s.invoice_date,Y(s.invoice_terms)).toISOString().split("T")[0]:"");const z=()=>{const n=g({service_type:"",quantity:0,rate:0,amount:0});n.amount=S(()=>n.quantity*n.rate),p.push(n)},C=n=>{p.splice(n,1)};s.total_amount=S(()=>p.reduce((n,l)=>n+l.amount,0));const O=()=>{v.insert.submit({supplier_invoice_number:s.supplier_invoice_number,supplier:s.supplier,service_date:s.service_date,invoice_date:s.invoice_date,supplier_name:s.supplier_name,invoice_terms:s.invoice_terms,street:s.street,city:s.city,state:s.state,zip_code:s.zip_code,payment_reference_date:s.payment_reference_date,payment_reference_no:s.payment_reference_no,notes:s.notes,supplier_invoice_items:p.map(n=>({service_type:n.service_type,quantity:n.quantity,rate:n.rate}))})},D=I({doctype:"Supplier",fields:["name as value","company_name as label"],orderBy:"creation desc"});return D.fetch(),q(()=>s.supplier_name,n=>{n&&(s.supplier=n.value)}),(n,l)=>{const R=G("router-link");return r(),_("form",{onSubmit:l[15]||(l[15]=H(()=>{},["prevent"]))},[e("div",ee,[e("div",se,[te,e("div",oe,[e("div",le,[e("div",ae,[e("div",ne,[e("button",ie,[m(R,{to:"/"},{default:A(()=>[ce]),_:1})]),e("button",{type:"button",class:"btn btn-primary btn-dark",onClick:O}," Save ")])])])])]),e("div",de,[e("div",re,[e("div",_e,[e("div",ue,[pe,e("div",me,[i(e("input",{type:"text",class:"form-control",id:"supplier_invoice_number","onUpdate:modelValue":l[0]||(l[0]=t=>o(s).supplier_invoice_number=t)},null,512),[[d,o(s).supplier_invoice_number,void 0,{number:!0}]])])])]),e("div",ve,[e("div",be,[he,e("div",ye,[m(h,{type:"date",size:"lg",variant:"outline",placeholder:"Service Date",id:"service_date",disabled:!1,modelValue:o(s).service_date,"onUpdate:modelValue":l[1]||(l[1]=t=>o(s).service_date=t)},null,8,["modelValue"])])])])]),e("div",fe,[e("div",we,[e("div",Ve,[ge,e("div",Se,[i(e("input",{type:"text",readonly:"",class:"form-control-plaintext",id:"supplier_id","onUpdate:modelValue":l[2]||(l[2]=t=>o(s).supplier=t)},null,512),[[d,o(s).supplier]])])])]),e("div",xe,[e("div",Ne,[Te,e("div",De,[m(h,{type:"date",size:"lg",variant:"outline",placeholder:"Invoice Date",id:"invoice_date",disabled:!1,modelValue:o(s).invoice_date,"onUpdate:modelValue":l[3]||(l[3]=t=>o(s).invoice_date=t)},null,8,["modelValue"])])])])]),e("div",Ie,[e("div",Ue,[e("div",ke,[Ee,e("div",ze,[w?(r(),P(M,{key:1,id:"supplier_name",options:o(D).data,placeholder:"Supplier Name",hideSearch:!o(s).supplier_invoice_number,label:"company_name",modelValue:o(s).supplier_name,"onUpdate:modelValue":l[4]||(l[4]=t=>o(s).supplier_name=t)},null,8,["options","hideSearch","modelValue"])):(r(),_("input",{key:0,type:"text",readonly:"",class:"form-control-plaintext",id:"supplier_name",value:o(s).supplier_name},null,8,Ce))])])]),e("div",Oe,[e("div",Re,[Be,e("div",qe,[i(e("select",{class:"form-select form-select-mb h-100 d-inline-block","aria-label":"Invoice Terms","onUpdate:modelValue":l[5]||(l[5]=t=>o(s).invoice_terms=t)},[Ae,(r(),_(x,null,N(k,t=>e("option",{value:t.value},y(t.label),9,Pe)),64))],512),[[U,o(s).invoice_terms]])])])])]),e("div",Me,[Le,e("div",je,[e("div",Fe,[He,e("div",Qe,[m(h,{type:"date",size:"lg",variant:"outline",placeholder:"Due Date",id:"due_date",disabled:!0,modelValue:o(b),"onUpdate:modelValue":l[6]||(l[6]=t=>L(b)?b.value=t:b=t)},null,8,["modelValue"])])])])]),e("div",$e,[e("div",Ge,[e("div",Je,[e("div",Ke,[Ze,e("div",We,[e("div",Xe,[e("div",Ye,[es,e("div",ss,[i(e("input",{type:"text",class:"form-control",id:"street","onUpdate:modelValue":l[7]||(l[7]=t=>o(s).street=t)},null,512),[[d,o(s).street]])])]),e("div",ts,[os,e("div",ls,[i(e("input",{type:"text",class:"form-control",id:"city","onUpdate:modelValue":l[8]||(l[8]=t=>o(s).city=t)},null,512),[[d,o(s).city]])])]),e("div",as,[ns,e("div",is,[i(e("input",{type:"text",class:"form-control",id:"state","onUpdate:modelValue":l[9]||(l[9]=t=>o(s).state=t)},null,512),[[d,o(s).state]])])]),e("div",cs,[ds,e("div",rs,[i(e("input",{type:"text",class:"form-control",id:"zip_code","onUpdate:modelValue":l[10]||(l[10]=t=>o(s).zip_code=t)},null,512),[[d,o(s).zip_code]])])])])])])])]),e("div",_s,[e("div",us,[e("div",ps,[e("h2",ms,[e("button",vs,y(o(f)()?"Notes":"Payment Reference and Notes"),1)]),e("div",bs,[e("div",hs,[o(f)()?T("",!0):(r(),_("div",ys,[fs,e("div",ws,[i(e("input",{type:"text",class:"form-control",id:"payment_reference_no","onUpdate:modelValue":l[11]||(l[11]=t=>o(s).payment_reference_no=t)},null,512),[[d,o(s).payment_reference_no]])])])),o(f)()?T("",!0):(r(),_("div",Vs,[gs,e("div",Ss,[m(h,{type:"date",size:"lg",variant:"outline",placeholder:"Payment Date",id:"payment_reference_date",disabled:!1,modelValue:o(s).payment_reference_date,"onUpdate:modelValue":l[12]||(l[12]=t=>o(s).payment_reference_date=t)},null,8,["modelValue"])])])),e("div",xs,[Ns,e("div",Ts,[m(j,{variant:"subtle",size:"md",placeholder:"Enter Notes Here",disabled:!1,modelValue:o(s).notes,"onUpdate:modelValue":l[13]||(l[13]=t=>o(s).notes=t),id:"notes"},null,8,["modelValue"])])])])])])])])])]),e("div",Ds,[Is,o(p).length!==0?(r(),_("table",Us,[ks,e("tbody",Es,[(r(!0),_(x,null,N(o(p),(t,V)=>(r(),_("tr",{key:V},[e("th",zs,y(V+1),1),e("td",null,[e("div",Cs,[i(e("select",{class:"form-select form-select-mb h-100 d-inline-block","aria-label":"Service Types","onUpdate:modelValue":c=>t.service_type=c},[Rs,(r(),_(x,null,N(E,c=>e("option",{value:c.value},y(c.label),9,Bs)),64))],8,Os),[[U,t.service_type]])])]),e("td",null,[i(e("input",{type:"text",class:"form-control","onUpdate:modelValue":c=>t.quantity=c},null,8,qs),[[d,t.quantity]])]),e("td",null,[e("div",As,[Ps,i(e("input",{type:"text",class:"form-control","onUpdate:modelValue":c=>t.rate=c},null,8,Ms),[[d,t.rate,void 0,{number:!0}]])])]),e("td",null,[e("div",Ls,[js,i(e("input",{type:"text",readonly:"",class:"form-control","onUpdate:modelValue":c=>t.amount=c},null,8,Fs),[[d,t.amount,void 0,{number:!0}]])])]),e("td",null,[e("button",Hs,[e("i",{onClick:c=>C(V),class:"bi bi-trash"},null,8,Qs)])])]))),128))])])):T("",!0),e("div",$s,[e("div",{class:F(o(p).length===0?"ms-auto pt-3":"ms-auto")},[e("div",{class:"btn-group",role:"group","aria-label":"Basic example"},[e("button",{type:"button",class:"btn btn-dark btn-sm",onClick:z},Js)])],2)])]),e("div",Ks,[e("div",Zs,[Ws,e("div",Xs,[e("div",Ys,[et,e("div",st,[e("div",tt,[ot,i(e("input",{type:"text",readonly:"",class:"form-control","onUpdate:modelValue":l[14]||(l[14]=t=>o(s).total_amount=t)},null,512),[[d,o(s).total_amount,void 0,{number:!0}]])])])])])])])])],32)}}};var it=B(lt,[["__scopeId","data-v-7312333a"]]);export{it as default};
